---
type: pull_request
state: closed (merged)
branch: bugfix/18-fix-prepare-release â†’ dev
created: 2026-02-23T10:30:21Z
updated: 2026-02-23T10:34:55Z
author: c-vigo
author_url: https://github.com/c-vigo
url: https://github.com/vig-os/sync-issues-action/pull/19
comments: 0
labels: none
assignees: none
milestone: none
projects: none
relationship: none
merged: 2026-02-23T10:34:55Z
synced: 2026-02-23T10:35:23.487Z
---

# [PR 19](https://github.com/vig-os/sync-issues-action/pull/19) fix(ci): use github.token for PR creation and fix changelog regex truncation

## Summary

- Use `github.token` instead of the App token for the "Create draft PR to main" step in `prepare-release.yml`, fixing `Resource not accessible by integration (createPullRequest)` error
- Fix `extract_unreleased_content()` regex in `prepare_changelog.py` that matched `##`/`###` at any character position, silently truncating changelog entries containing inline heading markers (e.g. `` `##` ``)

## Test plan

- [x] All 19 existing `test_prepare_changelog.py` tests pass
- [x] Manual verification: `prepare_changelog.py prepare` + `extract-notes` now preserves all 6 Fixed entries (was truncated to 1)
- [ ] Re-run Prepare Release workflow with version `0.2.0` after merge (stale `release/0.2.0` branch already deleted)

Refs: #18


---
---

## Commits

### Commit 1: [ffe9e9b](https://github.com/vig-os/sync-issues-action/commit/ffe9e9b9937d691fe989bb56a4b12db13307cd08) by [c-vigo](https://github.com/c-vigo) on February 23, 2026 at 10:25 AM
fix(ci): use github.token for PR creation and fix changelog regex truncation, 9 files modified (.github/prepare_changelog.py, .github/workflows/prepare-release.yml)

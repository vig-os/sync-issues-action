---
type: pull_request
state: closed (merged)
branch: feature/13-ci-cd-workflows → dev
created: 2026-02-20T16:41:37Z
updated: 2026-02-23T10:05:25Z
author: c-vigo
author_url: https://github.com/c-vigo
url: https://github.com/vig-os/sync-issues-action/pull/14
comments: 0
labels: none
assignees: c-vigo
milestone: none
projects: none
relationship: none
merged: 2026-02-23T10:05:15Z
synced: 2026-02-23T10:06:06.666Z
---

# [PR 14](https://github.com/vig-os/sync-issues-action/pull/14) ci: implement CI/CD pipeline, release process, and repo tooling

## Description

Implement the full CI/CD pipeline for the project: continuous integration checks, a three-phase release process (prepare → release → post-release), security scanning, integration testing, composite actions, and supporting tooling. Also includes a merged bugfix for sub-issue sync (#15/#16).

## Type of Change

- [ ] `feat` -- New feature
- [ ] `fix` -- Bug fix
- [ ] `docs` -- Documentation only
- [ ] `chore` -- Maintenance task (deps, config, etc.)
- [ ] `refactor` -- Code restructuring (no behavior change)
- [ ] `test` -- Adding or updating tests
- [x] `ci` -- CI/CD pipeline changes
- [x] `build` -- Build system or dependency changes
- [ ] `revert` -- Reverts a previous commit
- [ ] `style` -- Code style (formatting, whitespace)

### Modifiers

- [ ] Breaking change (`!`) -- This change breaks backward compatibility

## Changes Made

### CI Workflow (`ci.yml`)

- Lint, build, test, integration-test, dependency-review, and summary gate jobs on PRs to `dev`, `release/**`, and `main`
- Manual `workflow_dispatch` with selectable test suite

### Three-Phase Release Process

- **Phase 1 — Prepare Release** (`prepare-release.yml`): create `release/X.Y.Z` branch, prepare CHANGELOG heading, open draft PR to `main`
- **Phase 2 — Release** (`release.yml`): validate prerequisites, finalize CHANGELOG date + `package.json` version, run full test suite on finalized code, create `vX.Y.Z` tag with provenance, publish GitHub Release with auto-generated notes, update floating tags (`vX`, `vX.Y`), automatic rollback with failure-issue on error
- **Phase 3 — Post-Release** (`post-release.yml`): merge `main` back into `dev`, reset CHANGELOG Unreleased section for the next cycle
- Dry-run mode across all phases with deep preview (CHANGELOG diff, version bump preview, tag listing)

### Security Workflows

- CodeQL static analysis on PRs and pushes (`codeql.yml`)
- OpenSSF Scorecard supply-chain security analysis uploading SARIF to the Security tab (`scorecard.yml`)

### Integration Testing (`integration-test.yml`)

- Reusable workflow called by CI and release
- 8 parallel scenarios: no-op baseline, issues-only, PRs-only, force-update, include-closed, sub-issues, updated-since/state-file, and default-mode

### Composite Actions

- `setup-env` — consistent Node.js installation (version from `.nvmrc`), npm dependency caching, optional `uv` install for pre-commit
- `build-dist` — ncc bundling with dist/ diff verification to prevent stale compiled output

### Release Tooling

- `prepare_changelog.py` — standalone Python 3 CLI (zero external deps) for CHANGELOG heading management, date stamping, and Unreleased section reset, with unit tests (`test_prepare_changelog.py`)
- `release_helpers.sh` — shell helper functions for release validation, with tests (`test_release_helpers.sh`)

### Configuration & Maintenance

- Dependabot configuration for weekly Actions (sha-pinned) and npm dependency updates targeting `dev`
- `.nvmrc` pinning Node.js 20 as single source of truth for CI, devcontainer, and local development
- `CODEOWNERS` file for automated review assignment
- Overhauled issue templates: `bug`, `chore`, `discussion`, `docs`, `feature`, `refactor` (removed generic `task`)
- Updated PR template with conventional-commit type checkboxes, changelog entry section, and refs footer
- Pre-commit config: removed Python checks, switched to `uvx` for pre-commit invocation
- Removed source maps from `dist/` to fix CI dist staleness checks
- `sync-issues.yml` updated to use local action (`uses: ./`) and GitHub App token for cache deletion

### Sub-Issues Bugfix (merged from #16, Refs: #15)

- Added `sync-sub-issues` opt-in action input (default: `true`)
- Fixed GraphQL field name: `parent` instead of `parentIssue`
- Graceful schema error handling: emits info message and falls back to `relationship: none` if the sub-issues API is unavailable
- Updated mocks and tests for correct field name and default behavior

### Documentation

- CHANGELOG updated with all Added/Changed/Fixed/Security entries for the Unreleased version
- README updated with `force-update` and `sync-sub-issues` inputs in the options table

## Changelog Entry

See `## Unreleased` in `CHANGELOG.md` — all user-visible changes (sub-issues sync, force-update, CI/CD pipeline, security workflows) are documented there.

## Testing

- [x] Tests pass locally (`npm test`)
- [x] Manual testing performed (describe below)

### Manual Testing Details

- Workflows validated via pre-commit YAML linting (`yamllint`), action-pin checks, and shellcheck
- `prepare_changelog.py` unit tests: `python -m pytest .github/tests/test_prepare_changelog.py`
- `release_helpers.sh` unit tests: `bash .github/tests/test_release_helpers.sh`
- Integration test suite validated via CI (8 parallel scenario jobs)
- Full end-to-end workflow testing requires a push to the remote and observing GitHub Actions runs

## Checklist

- [x] My code follows the project's style guidelines
- [x] I have performed a self-review of my code
- [x] I have commented my code, particularly in hard-to-understand areas
- [x] I have updated the documentation accordingly
- [x] I have updated `CHANGELOG.md` in the `[Unreleased]` section (and pasted the entry above)
- [x] My changes generate no new warnings or errors
- [x] I have added tests that prove my fix is effective or that my feature works
- [x] New and existing unit tests pass locally with my changes
- [x] Any dependent changes have been merged and published

## Additional Notes

The `build-dist` action enforces that `dist/` is always committed in sync with source — any PR with stale dist will fail the CI `build` job. The `.nvmrc` file ensures local devcontainer and CI always use the same Node.js major version; bumping Node requires only a single-line change.

The release process uses a GitHub App token (`APP_ID` / `APP_PRIVATE_KEY` secrets) for operations that need to bypass branch protection rules (pushing to release branches, creating tags). The `GITHUB_TOKEN` is used everywhere else with least-privilege permissions.

`prepare_changelog.py` is a temporary in-repo tool that will eventually be extracted into a standalone GitHub Action or pip package.

Refs: #13


---
---

## Commits

### Commit 1: [8ed0182](https://github.com/vig-os/sync-issues-action/commit/8ed01823cce1aa963a472dbaefb5f99a493c9008) by [c-vigo](https://github.com/c-vigo) on February 20, 2026 at 03:21 PM
chore: update pre-commit hooks and pymarkdown config, 129 files modified (.pre-commit-config.yaml, .pymarkdown, .pymarkdown.config.md)

### Commit 2: [3e09cb5](https://github.com/vig-os/sync-issues-action/commit/3e09cb518b4cffa05ea3079a4c71cc58ea6511a4) by [c-vigo](https://github.com/c-vigo) on February 20, 2026 at 03:23 PM
chore: overhaul issue templates, 427 files modified

### Commit 3: [9029a5d](https://github.com/vig-os/sync-issues-action/commit/9029a5d1927982f7cda8a4a012215b14c516d9d2) by [c-vigo](https://github.com/c-vigo) on February 20, 2026 at 03:23 PM
chore: add CODEOWNERS and update PR template, 66 files modified (.github/CODEOWNERS, .github/pull_request_template.md)

### Commit 4: [838370e](https://github.com/vig-os/sync-issues-action/commit/838370ee23d0e913de32ee0c5260ecbe91de550e) by [c-vigo](https://github.com/c-vigo) on February 20, 2026 at 03:23 PM
ci: add dependabot configuration, 38 files modified (.github/dependabot.yml)

### Commit 5: [7c02f41](https://github.com/vig-os/sync-issues-action/commit/7c02f410b3e3a181a72c21e686e5192f2c9d1aff) by [c-vigo](https://github.com/c-vigo) on February 20, 2026 at 03:23 PM
ci: add setup-env composite action, 49 files modified (.github/actions/setup-env/action.yml)

### Commit 6: [511127f](https://github.com/vig-os/sync-issues-action/commit/511127fc600914bf376a02e6621f7c2c1c5315ea) by [c-vigo](https://github.com/c-vigo) on February 20, 2026 at 03:23 PM
ci: add CI workflow, 152 files modified (.github/workflows/ci.yml)

### Commit 7: [ae6a55f](https://github.com/vig-os/sync-issues-action/commit/ae6a55f4e1809e447504cd1d8237970c441efbdd) by [c-vigo](https://github.com/c-vigo) on February 20, 2026 at 03:24 PM
ci: add CodeQL and Scorecard security analysis workflows, 115 files modified (.github/workflows/codeql.yml, .github/workflows/scorecard.yml)

### Commit 8: [c605dfc](https://github.com/vig-os/sync-issues-action/commit/c605dfcf425fde70b379c1ff4f6d3258500dffc2) by [c-vigo](https://github.com/c-vigo) on February 20, 2026 at 03:24 PM
ci: add release workflow, 478 files modified (.github/workflows/release.yml)

### Commit 9: [70f375c](https://github.com/vig-os/sync-issues-action/commit/70f375cb09083051387c4cd3c00c39def266dcd7) by [c-vigo](https://github.com/c-vigo) on February 20, 2026 at 03:24 PM
fix(ci): use GitHub App token for cache deletion in sync-issues, 2 files modified (.github/workflows/sync-issues.yml)

### Commit 10: [8cc3446](https://github.com/vig-os/sync-issues-action/commit/8cc3446d064b07ad6ae728b93b512db875d4ec78) by [c-vigo](https://github.com/c-vigo) on February 20, 2026 at 03:27 PM
chore: remove Python checks from pre-commit config, 9 files modified (.pre-commit-config.yaml)

### Commit 11: [7354165](https://github.com/vig-os/sync-issues-action/commit/7354165281bf6d557e8db3240bc1a9b98baf9510) by [c-vigo](https://github.com/c-vigo) on February 20, 2026 at 03:49 PM
ci: add optional uv installation to setup-env action, 22 files modified (.github/actions/setup-env/action.yml, .github/workflows/ci.yml)

### Commit 12: [5be6e8c](https://github.com/vig-os/sync-issues-action/commit/5be6e8c380338a82e3b29dde0549b3e1ef05eb18) by [c-vigo](https://github.com/c-vigo) on February 20, 2026 at 04:26 PM
ci: add build-dist action and build job to CI and release, 101 files modified (.github/actions/build-dist/action.yml, .github/workflows/ci.yml, .github/workflows/release.yml)

### Commit 13: [222f104](https://github.com/vig-os/sync-issues-action/commit/222f104fb01119d06e22ef0272ec099469dbe646) by [c-vigo](https://github.com/c-vigo) on February 20, 2026 at 04:26 PM
ci: pin Node.js version via .nvmrc as single source of truth, 13 files modified (.devcontainer/scripts/post-create.sh, .github/actions/setup-env/action.yml, .nvmrc)

### Commit 14: [293e7b4](https://github.com/vig-os/sync-issues-action/commit/293e7b4a866f339982ebe3502207d4108a2d5c3f) by [c-vigo](https://github.com/c-vigo) on February 20, 2026 at 04:37 PM
build: rebuild bundle dist, 20 files modified (dist/index.js, dist/index.js.map, dist/src/index.d.ts.map)

### Commit 15: [c8eab8b](https://github.com/vig-os/sync-issues-action/commit/c8eab8bcf99a53f531be1c98bbe511ce198eb8a2) by [c-vigo](https://github.com/c-vigo) on February 20, 2026 at 07:18 PM
build(dist): remove source maps to fix CI dist staleness, 695 files modified

### Commit 16: [c7f0e5d](https://github.com/vig-os/sync-issues-action/commit/c7f0e5daed492140b99ea96ad01d0784d4122788) by [c-vigo](https://github.com/c-vigo) on February 20, 2026 at 08:59 PM
fix(ci): replace uv run with uvx for pre-commit invocation, 12 files modified (.github/workflows/ci.yml, .pre-commit-config.yaml)

### Commit 17: [382264a](https://github.com/vig-os/sync-issues-action/commit/382264a045ae78c1bee0807e96efbcb94cdcee1f) by [c-vigo](https://github.com/c-vigo) on February 20, 2026 at 09:01 PM
feat( ci): use local action (uses: ./) in sync-issues workflow, 3 files modified (.github/workflows/sync-issues.yml)

### Commit 18: [5b69195](https://github.com/vig-os/sync-issues-action/commit/5b691956e23978cf94248b5164a36e73fb457def) by [c-vigo](https://github.com/c-vigo) on February 22, 2026 at 10:30 AM
test(ci): add prepare_changelog unit tests, 122 files modified (.github/tests/test_prepare_changelog.py)

### Commit 19: [ebb5de7](https://github.com/vig-os/sync-issues-action/commit/ebb5de7912b8d912b4d24b1019684b1d6c42bc8e) by [c-vigo](https://github.com/c-vigo) on February 22, 2026 at 10:30 AM
ci: add CHANGELOG management tool for release workflow, 416 files modified (.github/prepare_changelog.py)

### Commit 20: [ff0fafc](https://github.com/vig-os/sync-issues-action/commit/ff0fafcfe4399915e7e302e56ecf1ac33c35511e) by [c-vigo](https://github.com/c-vigo) on February 22, 2026 at 10:30 AM
ci: add integration-test reusable workflow and wire into CI, 215 files modified (.github/workflows/ci.yml, .github/workflows/integration-test.yml)

### Commit 21: [d18ec8a](https://github.com/vig-os/sync-issues-action/commit/d18ec8a9f1eb8cb84a72baebf4e74afc02f9c412) by [c-vigo](https://github.com/c-vigo) on February 22, 2026 at 10:31 AM
ci: add prepare-release workflow (Phase 1), 292 files modified (.github/workflows/prepare-release.yml)

### Commit 22: [76fa183](https://github.com/vig-os/sync-issues-action/commit/76fa183b1b51c8316b00b13d8ef3e26fc43a1f45) by [c-vigo](https://github.com/c-vigo) on February 22, 2026 at 10:31 AM
ci: overhaul release workflow with v-prefix tags, app tokens, and provenance, 276 files modified (.github/workflows/release.yml)

### Commit 23: [d4a6cc4](https://github.com/vig-os/sync-issues-action/commit/d4a6cc4f670216fdf308971a42dbe60458c1459b) by [c-vigo](https://github.com/c-vigo) on February 22, 2026 at 10:31 AM
ci: add post-release workflow (Phase 3), 133 files modified (.github/workflows/post-release.yml)

### Commit 24: [fae558a](https://github.com/vig-os/sync-issues-action/commit/fae558a99b70dc5e1178616fbc280453bfe384f1) by [c-vigo](https://github.com/c-vigo) on February 22, 2026 at 10:44 AM
test(ci): add release helper functions with tests, 252 files modified (.github/prepare_changelog.py, .github/release_helpers.sh, .github/tests/test_prepare_changelog.py, .github/tests/test_release_helpers.sh)

### Commit 25: [84b1812](https://github.com/vig-os/sync-issues-action/commit/84b1812e34dffa4852da6b1174631a42d7d38d13) by [c-vigo](https://github.com/c-vigo) on February 22, 2026 at 10:44 AM
ci: enhance release workflow dry-run with deep preview, 122 files modified (.github/workflows/prepare-release.yml, .github/workflows/release.yml)

### Commit 26: [fcbd2f3](https://github.com/vig-os/sync-issues-action/commit/fcbd2f31d571055585692f5b10a65c2a4fbb6f34) by [c-vigo](https://github.com/c-vigo) on February 22, 2026 at 10:56 AM
fix(ci): add missing permissions for reusable workflow in CI, 2 files modified (.github/workflows/ci.yml)

### Commit 27: [336cc03](https://github.com/vig-os/sync-issues-action/commit/336cc035cea231679c46b7a4376eaf4b33149e36) by [c-vigo](https://github.com/c-vigo) on February 23, 2026 at 08:33 AM
test: add failing tests for sync-sub-issues opt-in and schema error handling, 121 files modified (src/__tests__/unit/index.test.ts)

### Commit 28: [6af39fa](https://github.com/vig-os/sync-issues-action/commit/6af39fa9086d7ff413315e4fbcb8498f9f5ad2ad) by [c-vigo](https://github.com/c-vigo) on February 23, 2026 at 08:34 AM
fix: add sync-sub-issues opt-in input and graceful schema error handling, 27 files modified (action.yml, src/index.ts)

### Commit 29: [2592992](https://github.com/vig-os/sync-issues-action/commit/2592992b96fdfb0360ff9709b09f2750741018a6) by [c-vigo](https://github.com/c-vigo) on February 23, 2026 at 08:35 AM
build(dist): rebuild bundle for sync-sub-issues changes, 137 files modified (dist/index.js, dist/src/__tests__/unit/index.test.js, dist/src/index.js)

### Commit 30: [bc05b4b](https://github.com/vig-os/sync-issues-action/commit/bc05b4b55fa4a269fb24c4fdb830e862bec4db99) by [c-vigo](https://github.com/c-vigo) on February 23, 2026 at 08:47 AM
test: update mocks for correct GraphQL field name and default behavior, 21 files modified (src/__tests__/unit/index.test.ts)

### Commit 31: [1654f0b](https://github.com/vig-os/sync-issues-action/commit/1654f0b1971559e23a0a984a097b0c46f4361e14) by [c-vigo](https://github.com/c-vigo) on February 23, 2026 at 08:48 AM
fix: use correct GraphQL field name `parent` instead of `parentIssue`, 11 files modified (action.yml, src/index.ts)

### Commit 32: [8190449](https://github.com/vig-os/sync-issues-action/commit/81904498d9f588bca21951e68558553e27ebd54b) by [c-vigo](https://github.com/c-vigo) on February 23, 2026 at 08:49 AM
ci: add sub-issue relationships integration test, 56 files modified (.github/workflows/integration-test.yml)

### Commit 33: [d9d9b14](https://github.com/vig-os/sync-issues-action/commit/d9d9b142dc57c2d622fee4aa7648e7d75c687701) by [c-vigo](https://github.com/c-vigo) on February 23, 2026 at 08:50 AM
build(dist): rebuild bundle with corrected GraphQL field name, 35 files modified (dist/index.js, dist/src/__tests__/unit/index.test.js, dist/src/index.js)

### Commit 34: [77f28d7](https://github.com/vig-os/sync-issues-action/commit/77f28d7d2d94b1a34cb07170ad47332431946da2) by [c-vigo](https://github.com/c-vigo) on February 23, 2026 at 08:59 AM
Merge pull request #16 from vig-os/bugfix/15-suppress-sub-issues-warnings, 382 files modified (.github/workflows/integration-test.yml, action.yml, dist/index.js, dist/src/__tests__/unit/index.test.js, dist/src/index.js, src/__tests__/unit/index.test.ts, src/index.ts)

### Commit 35: [caaf1b2](https://github.com/vig-os/sync-issues-action/commit/caaf1b2e531260803c726eb99d33188f88234219) by [c-vigo](https://github.com/c-vigo) on February 23, 2026 at 09:15 AM
ci: add no-op baseline integration test, 30 files modified (.github/workflows/integration-test.yml)

### Commit 36: [8bb9c51](https://github.com/vig-os/sync-issues-action/commit/8bb9c51582f40be56b36bc6e90c5eeed53492bc1) by [c-vigo](https://github.com/c-vigo) on February 23, 2026 at 09:18 AM
ci: split integration tests into parallel jobs, 124 files modified (.github/workflows/integration-test.yml)

### Commit 37: [9c789ad](https://github.com/vig-os/sync-issues-action/commit/9c789adf900ca98b11e6d091283bdc85f603027d) by [c-vigo](https://github.com/c-vigo) on February 23, 2026 at 09:31 AM
test: harden integration tests and add missing feature coverage, 258 files modified (.github/workflows/integration-test.yml)

### Commit 38: [ef0338e](https://github.com/vig-os/sync-issues-action/commit/ef0338e0614f2d0564fd93134aff713b17424df3) by [c-vigo](https://github.com/c-vigo) on February 23, 2026 at 09:36 AM
fix(ci): include closed issues in sub-issues tests, 4 files modified (.github/workflows/integration-test.yml)

### Commit 39: [a727430](https://github.com/vig-os/sync-issues-action/commit/a7274307aab7875d9bbb4e11093e8277fd02a593) by [c-vigo](https://github.com/c-vigo) on February 23, 2026 at 09:55 AM
docs: update CHANGELOG and README, 30 files modified (CHANGELOG.md, README.md)

---
type: pull_request
state: closed (merged)
branch: bugfix/10-force-update-issues â†’ dev
created: 2026-02-20T13:35:39Z
updated: 2026-02-20T13:51:16Z
author: c-vigo
author_url: https://github.com/c-vigo
url: https://github.com/vig-os/sync-issues-action/pull/12
comments: 0
labels: none
assignees: c-vigo
milestone: none
projects: none
relationship: none
merged: 2026-02-20T13:51:00Z
synced: 2026-02-20T13:57:24.996Z
---

# [PR 12](https://github.com/vig-os/sync-issues-action/pull/12) fix: force-update does not re-sync issues (#10)

## Description

When triggering a workflow with `force-update: true`, only PRs were re-synced while issues were silently skipped. The root cause is that `hasContentChanged` strips frontmatter (including the `synced:` timestamp) and compares body content only -- when nothing has changed on GitHub, the body is identical and the write is skipped, even during a force-update. The action had no mechanism to bypass this content-comparison gate.

This PR adds a `force-update` boolean input to the action. When active, both `syncIssuesToMarkdown` and `syncPRsToMarkdown` skip the `hasContentChanged` check and always write files (updating the `synced:` frontmatter timestamp, which produces a real git diff).

## Related Issue(s)

Closes #10

## Type of Change

- [x] Bug fix (non-breaking change which fixes an issue)
- [ ] New feature (non-breaking change which adds functionality)
- [ ] Breaking change (fix or feature that would cause existing functionality to not work as expected)
- [x] Documentation update
- [ ] Refactoring (no functional changes)
- [ ] CI / Build change
- [x] Test updates

## Changes Made

- `action.yml` -- added `force-update` input (boolean string, default `'false'`)
- `src/index.ts` -- read the new input, thread a `forceUpdate` boolean into `syncIssuesToMarkdown` and `syncPRsToMarkdown`, short-circuit with `forceUpdate || hasContentChanged(...)`
- `.github/workflows/sync-issues.yml` -- pass `force-update: ${{ github.event.inputs.force-update }}` to the action
- `src/__tests__/unit/index.test.ts` -- two new tests (issues + PRs) verifying force-update bypasses `hasContentChanged`
- `CHANGELOG.md` -- added entry under Unreleased > Fixed
- `README.md` -- added `force-update` row to the Options table

## Changelog Entry

### Fixed

- **`--force-update` does not re-sync issues (only PRs)** ([#10](https://github.com/vig-os/sync-issues-action/issues/10))
  - Added `force-update` action input that bypasses the `hasContentChanged` content-comparison gate
  - When active, all fetched items are re-written (with updated `synced:` frontmatter) even if body content is unchanged
  - Updated `sync-issues.yml` workflow to pass the `force-update` dispatch input to the action

## Testing

- [x] Tests pass locally (`npx jest` -- 89 passed, 0 failed)
- [x] Manual testing performed (describe below)

### Manual Testing Details

- Ran `npx jest -t "force-update input"` to verify both new tests pass (issue + PR force-update)
- Ran `npx jest -t "should skip writing when only synced timestamp changes"` to confirm existing behaviour is preserved when `force-update` is not set

## Checklist

- [x] My code follows the project's style guidelines
- [x] I have performed a self-review of my code
- [x] I have commented my code, particularly in hard-to-understand areas
- [x] I have updated the documentation accordingly
- [x] I have updated `CHANGELOG.md` in the `[Unreleased]` section (and pasted the entry above)
- [x] My changes generate no new warnings or errors
- [x] I have added tests that prove my fix is effective or that my feature works
- [x] New and existing unit tests pass locally with my changes
- [x] Any dependent changes have been merged and published

## Additional Notes

The fix follows TDD: failing tests were committed first, then the implementation, then the workflow and docs updates. The commit history proves compliance:

1. `test:` failing test for issues
2. `test:` failing test for PRs
3. `fix:` implementation (action.yml + src/index.ts)
4. `fix:` workflow update
5. `docs:` changelog
6. `docs:` README

Refs: #10



---
---

## Commits

### Commit 1: [b759324](https://github.com/vig-os/sync-issues-action/commit/b759324d59ca158b8fb16577c318a10806169cbb) by [c-vigo](https://github.com/c-vigo) on February 20, 2026 at 12:39 PM
test: add failing test for force-update bypassing hasContentChanged on issues, 57 files modified (src/__tests__/unit/index.test.ts)

### Commit 2: [cba6182](https://github.com/vig-os/sync-issues-action/commit/cba6182630b4239552543a252e19c81f1c1deb7d) by [c-vigo](https://github.com/c-vigo) on February 20, 2026 at 12:40 PM
test: add failing test for force-update bypassing hasContentChanged on PRs, 60 files modified (src/__tests__/unit/index.test.ts)

### Commit 3: [0117510](https://github.com/vig-os/sync-issues-action/commit/0117510379d064fb04ae4e6c786b43d3984ecd50) by [c-vigo](https://github.com/c-vigo) on February 20, 2026 at 12:42 PM
fix: add force-update input to bypass hasContentChanged gate, 24 files modified (action.yml, src/index.ts)

### Commit 4: [5478179](https://github.com/vig-os/sync-issues-action/commit/5478179d217c224b67b1aab84dfb39db76e0e690) by [c-vigo](https://github.com/c-vigo) on February 20, 2026 at 12:42 PM
fix: pass force-update input to sync-issues action in workflow, 56 files modified (.github/workflows/sync-issues.yml)

### Commit 5: [25826f7](https://github.com/vig-os/sync-issues-action/commit/25826f78a920ae6aba9bd7f85987e0631039b53e) by [c-vigo](https://github.com/c-vigo) on February 20, 2026 at 01:18 PM
docs: update changelog for force-update fix, 4 files modified (CHANGELOG.md)

### Commit 6: [f7065e8](https://github.com/vig-os/sync-issues-action/commit/f7065e8e5461cc24c10d377f6f56b684b73861d7) by [c-vigo](https://github.com/c-vigo) on February 20, 2026 at 01:21 PM
docs: add force-update input to README options table, 1 file modified (README.md)
